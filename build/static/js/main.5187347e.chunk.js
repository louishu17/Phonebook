(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),o=t(6),a=t(3),u=t(1),s=t(0),l=function(e){var n=e.person,t=e.deletePerson;return Object(s.jsxs)("li",{children:[n.name," ",n.number," ",Object(s.jsx)("button",{onClick:function(){return t(n.id)},children:"delete"})]})},i=function(e){var n=e.persons,t=e.allPersons,c=e.deletePerson;return console.log(n.length),0===n.length?Object(s.jsx)("ul",{children:t.map((function(e,n){return Object(s.jsx)(l,{person:e,deletePerson:c},n)}))}):Object(s.jsx)("ul",{children:n.map((function(e,n){return Object(s.jsx)(l,{person:e,deletePerson:c},n)}))})},d=function(e){var n=e.newSearchName,t=e.handleSearchNameChange;return Object(s.jsxs)("div",{children:["filter shown with"," ",Object(s.jsx)("input",{value:n,onChange:t})]})},b={color:"green",background:"lightgrey",font_size:"20",border_style:"solid",border_radius:5,border_color:"green",padding:10,margin_bottom:10},h={color:"red",background:"lightgrey",font_size:20,border_style:"solid",border_radius:5,padding:10,margin_bottom:10},j=function(e){var n=e.message;return null==n?null:n.includes("ERROR")?Object(s.jsx)("div",{style:h,className:"error",children:n}):Object(s.jsx)("div",{style:b,className:"error",children:n})},f=function(e){var n=e.addName,t=e.newName,c=e.handleNameChange,r=e.newNumber,o=e.handleNumberChange;return Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:c})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:r,onChange:o})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},m=t(4),O=t.n(m),g="https://nameless-reaches-32726.herokuapp.com/api/persons",p=function(){return O.a.get(g).then((function(e){return e.data}))},v=function(e){return O.a.post(g,e).then((function(e){return e.data}))},x=function(e,n){return O.a.put("".concat(g,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return O.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))},N=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)([]),l=Object(a.a)(r,2),b=l[0],h=l[1],m=Object(u.useState)(""),O=Object(a.a)(m,2),g=O[0],N=O[1],y=Object(u.useState)(""),C=Object(a.a)(y,2),S=C[0],k=C[1],R=Object(u.useState)(""),_=Object(a.a)(R,2),P=_[0],E=_[1],T=Object(u.useState)(null),z=Object(a.a)(T,2),A=z[0],D=z[1];Object(u.useEffect)((function(){console.log("effect"),p().then((function(e){h(e)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(j,{message:A}),Object(s.jsx)(d,{newSearchName:P,handleSearchNameChange:function(e){console.log(e.target.value),E(e.target.value);var n=b.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));c(n)}}),Object(s.jsx)("h3",{children:"Add a new"}),Object(s.jsx)(f,{addName:function(e){e.preventDefault();var n=b.filter((function(e){return e.name===g})),t=n[0],c=Object(o.a)(Object(o.a)({},t),{},{number:S});0!==n.length?window.confirm("".concat(t.name," is already added to the phonebook, replace the old number with a new one?"))&&x(c.id,c).then((function(e){console.log("".concat(e.name," successfully updated")),h(b.map((function(n){return n.id!==t.id?n:e}))),N(""),k(""),D("".concat(c.name," was successfully updated")),setTimeout((function(){D(null)}),5e3)})).catch((function(e){console.log(e),h(b.filter((function(e){return e.id!==c.id}))),N(""),k(""),D("[ERROR] ".concat(c.name," was already deleted from server")),setTimeout((function(){D(null)}),5e3)})):v({name:g,number:S}).then((function(e){h(b.concat(e)),N(""),k(""),D("Added ".concat(e.name)),setTimeout((function(){D(null)}),5e3)})).catch((function(e){D("[ERROR] ".concat(e.response.data.error)),setTimeout((function(){D(null)}),5e3),console.log(e.response.data)}))},newName:g,handleNameChange:function(e){console.log(e.target.value),N(e.target.value)},newNumber:S,handleNumberChange:function(e){k(e.target.value)}}),Object(s.jsx)("h3",{children:"Numbers"}),Object(s.jsx)(i,{persons:t,allPersons:b,deletePerson:function(e){var n=b.filter((function(n){return n.id===e})),t=n[0].name,c=n[0].id;window.confirm("Delete ".concat(t))&&(w(c),console.log("".concat(t," successfully deleted")),D("".concat(t," was successfully deleted")),h(b.filter((function(e){return e.id!==c}))),setTimeout((function(){D(null)}),5e3))}})]})};r.a.render(Object(s.jsx)(N,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.5187347e.chunk.js.map